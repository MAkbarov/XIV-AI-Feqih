import{j as e}from"./markdown-CGR2RDhP.js";import{a as h,H as b,b as j}from"./vendor-4eYsLQor.js";import{A as y}from"./AdminLayout-BZqfciDF.js";import{u as p}from"./app-DK5cRGw_.js";import{I as s}from"./Icon-4HnnCzTR.js";import"./index-Cn3or5DS.js";import"./Footer-BT-VBTBm.js";import"./app-CvpZHLlP.js";function A({stats:t,dailyStats:u,recentFeedback:i,chatStats:l,feedbackRating:d,topDays:n,dateFrom:c,dateTo:o}){const x=p(),[f,N]=h.useState(null),m=a=>{switch(a){case"like":return{color:"text-green-600 bg-green-50",iconName:"heart",iconColor:"#16a34a",text:"Bəyəndib"};case"dislike":return{color:"text-red-600 bg-red-50",iconName:"close",iconColor:"#dc2626",text:"Bəyənməyib"};case"report":return{color:"text-orange-600 bg-orange-50",iconName:"warning",iconColor:"#ea580c",text:"Şikayət"};default:return{color:"text-gray-600 bg-gray-50",iconName:"question",iconColor:"#6b7280",text:a}}},g=({userType:a})=>{const r=a==="guest";return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:r?"Qonaq":"İstifadəçi"})};return e.jsxs(y,{children:[e.jsx(b,{title:"Çat Analitikaları - Admin Panel"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s,{name:"chart",size:28,color:"#3b82f6"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Çat Analitikaları"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-3 md:self-end",children:[e.jsxs("a",{href:`/admin/chat-analytics/export?date_from=${c}&date_to=${o}`,className:"px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base bg-green-600 text-white rounded-lg hover:bg-green-700 dark:hover:bg-green-600/90 transition-colors flex items-center gap-2",target:"_blank",rel:"noreferrer",children:[e.jsx(s,{name:"download",size:16,color:"white"}),"CSV İxrac"]}),e.jsxs("button",{onClick:async()=>{if(confirm("Bütün analitika statistikası sıfırlansın? Bu əməliyyat geri qaytarıla bilməz."))try{await j.post("/admin/chat-analytics/reset-all"),x.success("Statistika sıfırlandı"),setTimeout(()=>window.location.reload(),800)}catch{x.error("Sıfırlama alınmadı")}},className:"px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base bg-red-600 text-white rounded-lg hover:bg-red-700 dark:hover:bg-red-600/90 transition-colors flex items-center gap-2",children:[e.jsx(s,{name:"delete",size:16,color:"white"}),"Bütün Statistikaları Sıfırla"]}),e.jsxs("a",{href:"/admin/chat-analytics/feedback",className:"px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 dark:hover:bg-indigo-600/90 transition-colors flex items-center gap-2",children:[e.jsx(s,{name:"clipboard",size:16,color:"white"}),"Ətraflı Feedback Siyahısı"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium",children:"Bəyənmə Nisbəti"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[d.positive_percentage,"%"]}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-400",children:[d.total," feedback-dən"]})]}),e.jsx(s,{name:"heart",size:48,color:"#16a34a"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium",children:"Ümumi Feedback"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:t.total_feedback}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-400 flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(s,{name:"heart",size:12,color:"#16a34a"}),t.likes]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(s,{name:"dislike",size:12,color:"#dc2626"}),t.dislikes]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(s,{name:"warning",size:12,color:"#ea580c"}),t.reports]})]})]}),e.jsx(s,{name:"clipboard",size:48,color:"#2563eb"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium",children:"Ümumi Səssiyalar"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:l.total_sessions}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Son həftə: ",l.recent_sessions]})]}),e.jsx(s,{name:"chat",size:48,color:"#9333ea"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-indigo-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-300 text-sm font-medium",children:"Ümumi Mesajlar"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:l.total_messages}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(s,{name:"users",size:12,color:"#6b7280"}),l.user_messages]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(s,{name:"nav_chat",size:12,color:"#6b7280"}),l.ai_messages]})]})]}),e.jsx(s,{name:"send",size:48,color:"#4f46e5"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Son Feedback-lər"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:i.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(s,{name:"inbox",size:48,color:"#9ca3af",className:"mx-auto mb-2"}),e.jsx("p",{children:"Helə feedback yoxdur"})]}):i.map(a=>{const r=m(a.feedback_type);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.color} flex items-center gap-1`,children:[e.jsx(s,{name:r.iconName,size:12,color:r.iconColor}),r.text]}),e.jsx(g,{userType:a.user_type})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.created_at})]}),e.jsxs("div",{className:"text-sm text-gray-800 dark:text-gray-200 mb-1 flex items-center gap-2",children:[e.jsx(s,{name:"users",size:14,color:"#6b7280"}),e.jsx("strong",{children:a.user_name})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:['"',a.message_content,'"']}),a.user_comment&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/40 p-2 rounded flex items-center gap-2",children:[e.jsx(s,{name:"edit",size:12,color:"#6b7280"}),a.user_comment]}),e.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-400 mt-2",children:["IP: ",a.ip_address]})]},a.id)})})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Ən Aktiv Günlər"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Son 30 gündə ən çox feedback alan günlər"})]}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(s,{name:"calendar",size:48,color:"#9ca3af",className:"mx-auto mb-2"}),e.jsx("p",{children:"Statistika yoxdur"})]}):e.jsx("div",{className:"space-y-3",children:n.map((a,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/40 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 bg-indigo-100 text-indigo-600 rounded-full text-sm font-bold",children:r+1}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.date})]}),e.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-300 rounded-full text-sm font-medium",children:[a.count," feedback"]})]},a.date))})})]})]}),e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(s,{name:"chart",size:24,color:"#9ca3af"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Ǝtraflı Statistika"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.likes}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Bəyənmə"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.dislikes}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Bəyənməmə"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.reports}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Şikayət"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.user_feedback+t.guest_feedback}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:["Ümumi (",t.user_feedback," user + ",t.guest_feedback," qonaq)"]})]})]})]}),e.jsx("div",{className:"mt-8 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s,{name:"info",size:24,color:"#3b82f6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-300",children:"Analitikalar haqqında"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200 mt-1",children:"Bu səhifədə çatbotunuzun performansını izləyə bilərsiniz. Bəyənmə nisbəti yüksək olduqca, istifadəçilər cavablardan məmnundur. Şikayətlərə diqqət edərək çatbotu təkmiləşdiriə bilərsiniz."})]})]})})]})]})}export{A as default};
