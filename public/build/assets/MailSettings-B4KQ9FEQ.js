import{j as e}from"./markdown-CGR2RDhP.js";import{c as g,H as b,R as x}from"./vendor-4eYsLQor.js";import{A as p}from"./AdminLayout-DvCE-vwa.js";import{T as i}from"./TextInput-DTpfiuKZ.js";import{u}from"./app-DpLxskS-.js";import"./index-Cn3or5DS.js";import"./Icon-4HnnCzTR.js";import"./Footer-CFOGyUqU.js";import"./app-BS3HdcSV.js";function h(){const s=u(),[n,t]=x.useState(!1),[r,o]=x.useState(""),[d,m]=x.useState(""),a=async()=>{if(!r.trim()||!d.trim()){s.error("Başlıq və məzmun tələb olunur");return}try{t(!0);const l=await fetch("/admin/mail/bulk-send",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({subject:r,body_html:d})}),c=await l.json();l.ok&&c.success?(s.success(`Göndərildi: ${c.sent_count}`),o(""),m("")):s.error(c.message||"Göndərmə xətası")}catch{s.error("Şəbəkə xətası")}finally{t(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Başlıq"}),e.jsx(i,{value:r,onChange:l=>o(l.target.value),variant:"glass",className:"w-full",placeholder:"Mövzu"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Məzmun (HTML)"}),e.jsx("textarea",{value:d,onChange:l=>m(l.target.value),rows:12,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm",placeholder:"HTML məzmun daxil edin...",dir:"ltr",style:{direction:"ltr",unicodeBidi:"plaintext",textAlign:"left"}})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:a,disabled:n,className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg disabled:opacity-50",children:n?"Göndərilir...":"Göndər"})})]})}function T({mail:s}){const n=u(),{data:t,setData:r,post:o,processing:d}=g({mail_mailer:s?.mail_mailer||"smtp",mail_host:s?.mail_host||"",mail_port:s?.mail_port||587,mail_username:s?.mail_username||"",mail_password:s?.mail_password||"",mail_encryption:s?.mail_encryption||"tls",mail_from_address:s?.mail_from_address||"",mail_from_name:s?.mail_from_name||""}),m=a=>{a.preventDefault(),o("/admin/mail-settings",{onSuccess:()=>n.success("E-poçt parametrləri yadda saxlandı!"),onError:()=>n.error("Yadda saxlanma xətası!")})};return e.jsxs(p,{children:[e.jsx(b,{title:"E-poçt Parametrləri"}),e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-6 text-gray-800 dark:text-gray-100",children:"E-poçt Parametrləri"}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"backdrop-blur bg-white/90 dark:bg-gray-800/90 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-600 p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mailer"}),e.jsxs("select",{value:t.mail_mailer,onChange:a=>r("mail_mailer",a.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[e.jsx("option",{value:"smtp",children:"SMTP"}),e.jsx("option",{value:"log",children:"Log"}),e.jsx("option",{value:"sendmail",children:"Sendmail"}),e.jsx("option",{value:"postmark",children:"Postmark"}),e.jsx("option",{value:"ses",children:"SES"}),e.jsx("option",{value:"resend",children:"Resend"}),e.jsx("option",{value:"failover",children:"Failover"}),e.jsx("option",{value:"roundrobin",children:"Round Robin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Şifrələmə"}),e.jsxs("select",{value:t.mail_encryption,onChange:a=>r("mail_encryption",a.target.value),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"starttls",children:"STARTTLS"}),e.jsx("option",{value:"none",children:"None"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Host"}),e.jsx(i,{value:t.mail_host,onChange:a=>r("mail_host",a.target.value),variant:"glass",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Port"}),e.jsx(i,{type:"number",value:t.mail_port,onChange:a=>r("mail_port",a.target.value),variant:"glass",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"İstifadəçi adı"}),e.jsx(i,{value:t.mail_username,onChange:a=>r("mail_username",a.target.value),variant:"glass",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Şifrə"}),e.jsx(i,{type:"password",value:t.mail_password,onChange:a=>r("mail_password",a.target.value),variant:"glass",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Göndərən ünvan"}),e.jsx(i,{type:"email",value:t.mail_from_address,onChange:a=>r("mail_from_address",a.target.value),variant:"glass",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Göndərənin adı"}),e.jsx(i,{value:t.mail_from_name,onChange:a=>r("mail_from_name",a.target.value),variant:"glass",className:"w-full"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg disabled:opacity-50",children:d?"Yadda saxlanılır...":"Yadda saxla"})})]}),e.jsxs("div",{className:"mt-10 backdrop-blur bg-white/90 dark:bg-gray-800/90 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-600 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100",children:"İstifadəçilərə Toplu Mesaj"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Bütün qeydiyyatlı istifadəçilərə göndərilir."}),e.jsx(h,{})]})]})]})}export{T as default};
