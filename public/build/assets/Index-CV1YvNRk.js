import{j as e}from"./markdown-CGR2RDhP.js";import{a as n,c as q,H as M,d as c}from"./vendor-4eYsLQor.js";import{A as B}from"./AdminLayout-DvCE-vwa.js";import{I as y}from"./Icon-4HnnCzTR.js";import"./index-Cn3or5DS.js";import"./app-DpLxskS-.js";import"./app-BS3HdcSV.js";import"./Footer-CFOGyUqU.js";function Y({chatSessions:r,stats:d,filters:w}){const[s,x]=n.useState(new Set),[S,g]=n.useState(!1),[C,m]=n.useState(!1),[b,_]=n.useState(w.search||""),[o,h]=n.useState(""),a={title:"Söhbət İdarəsi",totalChats:"Ümumi Söhbətlər",totalMessages:"Ümumi Mesajlar",activeChats:"Aktiv Söhbətlər",guestChats:"Qonaq Söhbətləri",userChats:"İstifadəçi Söhbətləri",todayChats:"Bu Gün",searchPlaceholder:"Başlıq, istifadəçi və ya session ID ilə axtar",selectAll:"Hamısını seç",deselectAll:"Seçimi ləğv et",bulkDelete:"Seçilənləri sil",deleteAll:"Hamısını sil",view:"Göstər",delete:"Sil",user:"İstifadəçi",guest:"Qonaq",messages:"mesaj",session:"Session",created:"Yaradıldı",actions:"Əməliyyat",confirmDelete:"Bu söhbəti silmək istədiyinizdən əminsiz?",confirmBulkDelete:"Seçilmiş söhbətləri silmək istədiyinizdən əminsiz?",confirmDeleteAll:"Bütün söhbətləri silmək istədiyinizdən əminsiz? Bu əməl geri alına bilməz!",typeToConfirm:'Təsdiq üçün "HAMISINI_SIL" yazın:',cancel:"Ləğv et",confirm:"Təsdiq et",noChats:"Söhbət tapılmadı",noChatsDesc:"Hələ heç bir söhbət yoxdur və ya axtar kriteriyasına uyğun söhbət yoxdur.",loading:"Yüklənir..."},D=t=>t?t.replace("&laquo; Previous","&laquo; Əvvəlki").replace("Previous","Əvvəlki").replace("Next &raquo;","Növbəti &raquo;").replace("Next","Növbəti").replace("&laquo;","&laquo;").replace("&raquo;","&raquo;"):"",{data:H,setData:u,post:p,processing:f}=q({session_ids:[],confirmation:""}),[l,j]=n.useState(!1),k=t=>{const i=new Set(s);i.has(t)?i.delete(t):i.add(t),x(i)},N=()=>{s.size===r.data.length?x(new Set):x(new Set(r.data.map(t=>t.session_id)))},A=t=>{t.preventDefault(),c.get("/admin/chat-management",{search:b},{preserveState:!0,replace:!0})},v=t=>{confirm(a.confirmDelete)&&c.delete(`/admin/chat-management/${t}`)},z=()=>{s.size!==0&&(u("session_ids",Array.from(s)),p("/admin/chat-management/bulk-delete",{onSuccess:()=>{x(new Set),m(!1)}}))},I=()=>{o!=="HAMISINI_SIL"||l||(u("confirmation",o),p("/admin/chat-management/delete-all",{onStart:()=>j(!0),onFinish:()=>j(!1),onSuccess:()=>{g(!1),h(""),x(new Set)}}))};return e.jsxs(B,{children:[e.jsx(M,{title:a.title}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-100",children:a.title})}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.total_chats}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.totalChats})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.total_messages}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.totalMessages})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:d.active_chats}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.activeChats})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:d.guest_chats}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.guestChats})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:d.user_chats}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.userChats})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:d.today_chats}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.todayChats})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("form",{onSubmit:A,className:"flex-1",children:e.jsx("input",{type:"text",value:b,onChange:t=>_(t.target.value),placeholder:a.searchPlaceholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:s.size===r.data.length?a.deselectAll:a.selectAll}),s.size>0&&e.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[a.bulkDelete," (",s.size,")"]}),e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-red-700 text-white rounded-lg hover:bg-red-800 transition-colors",children:a.deleteAll})]})]}),e.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden",children:r.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:s.size===r.data.length&&r.data.length>0,onChange:N,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a.session}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a.user}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a.messages}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a.created}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:a.actions})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-600",children:r.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:s.has(t.session_id),onChange:()=>k(t.session_id),className:"rounded border-gray-300"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate max-w-xs",children:t.title}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:[t.session_id.substring(0,8),"..."]})]}),e.jsx("td",{className:"px-6 py-4",children:t.user?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.user.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.user.email})]}):e.jsxs("div",{children:[e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-200 rounded-full",children:a.guest}),t.ip_address&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 font-mono",children:t.ip_address})]})}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100",children:[t.messages_count," ",a.messages]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString("az-AZ")}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[e.jsx("button",{onClick:()=>c.visit(`/admin/chat-management/${t.session_id}`),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 font-medium",children:a.view}),e.jsx("button",{onClick:()=>v(t.session_id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 font-medium",children:a.delete})]})]},t.id))})]})}),e.jsx("div",{className:"lg:hidden space-y-4 p-4",children:r.data.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("input",{type:"checkbox",checked:s.has(t.session_id),onChange:()=>k(t.session_id),className:"rounded border-gray-300"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100 truncate",children:t.title})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono",children:[t.session_id.substring(0,16),"..."]})]})}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[a.user,":"]}),t.user?e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:t.user.name}):e.jsxs("div",{children:[e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded-full",children:a.guest}),t.ip_address&&e.jsx("div",{className:"text-xs text-gray-500 mt-1 font-mono",children:t.ip_address})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[a.messages,":"]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:t.messages_count})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[a.created,":"]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:new Date(t.created_at).toLocaleDateString("az-AZ")})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>c.visit(`/admin/chat-management/${t.session_id}`),className:"flex-1 px-3 py-2 bg-indigo-500 text-white text-sm rounded-lg hover:bg-indigo-600",children:a.view}),e.jsx("button",{onClick:()=>v(t.session_id),className:"flex-1 px-3 py-2 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600",children:a.delete})]})]},t.id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{name:"feature_chat",size:64,color:"#d1d5db",className:"mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:a.noChats}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a.noChatsDesc})]})}),r.links&&e.jsx("div",{className:"mt-6 flex justify-center",children:r.links.map((t,i)=>e.jsx("button",{onClick:()=>c.visit(t.url),disabled:!t.url,className:`px-3 py-2 mx-1 text-sm rounded-lg ${t.active?"bg-indigo-500 text-white":t.url?"bg-white text-gray-700 hover:bg-gray-100 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600":"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:D(t.label)}},i))})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a.bulkDelete}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:a.confirmBulkDelete}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:a.cancel}),e.jsx("button",{onClick:z,disabled:f,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",children:f?a.loading:a.confirm})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg p-6 max-w-md w-full relative",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:a.deleteAll}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:a.confirmDeleteAll}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a.typeToConfirm}),e.jsx("input",{type:"text",value:o,onChange:t=>h(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"HAMISINI_SIL"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{l||(g(!1),h(""))},disabled:l,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:a.cancel}),e.jsx("button",{onClick:I,disabled:l||o!=="HAMISINI_SIL",className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 flex items-center justify-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(y,{name:"activity",size:16,color:"white",className:"animate-spin"})," ",a.loading]}):a.confirm})]}),l&&e.jsx("div",{className:"absolute inset-0 bg-white/60 dark:bg-black/40 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[e.jsx(y,{name:"activity",size:20,className:"animate-spin"}),e.jsx("span",{children:"Silinir, zəhmət olmasa gözləyin..."})]})})]})})]})}export{Y as default};
