import{j as e}from"./markdown-CGR2RDhP.js";import{a as h,H,L as y}from"./vendor-4eYsLQor.js";import{U as L}from"./UserLayout-9MMWRGBU.js";import{a as T}from"./app-WdGbIXar.js";import{I as r}from"./Icon-4HnnCzTR.js";import{m as n}from"./proxy-CfrAqMoI.js";import"./Footer-CVcIozJJ.js";import"./app-C_PogMoC.js";function Y({chatSessions:c=[],auth:j,settings:v={},footerSettings:N={},theme:b={}}){const{isDarkMode:k}=T(),[s,w]=h.useState(""),[d,u]=h.useState([]),[l,p]=h.useState(c),i=b?.primary_color||"#10b981",o=b?.secondary_color||"#06b6d4",z=b?.accent_color||"#f59e0b";h.useEffect(()=>{if(!s){p(c);return}const a=c.filter(t=>t.title?.toLowerCase().includes(s.toLowerCase())||t.messages?.some(g=>g.content.toLowerCase().includes(s.toLowerCase())));p(a)},[s,c]);const f={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},S=a=>{const t=new Date(a),D=Math.abs(new Date-t),m=Math.ceil(D/(1e3*60*60*24));return m===1?"Bugün":m===2?"Dünən":m<=7?`${m} gün əvvəl`:t.toLocaleDateString("az-AZ",{year:"numeric",month:"long",day:"numeric"})},$=(a,t=150)=>a.length<=t?a:a.substring(0,t)+"...",C=a=>{u(t=>t.includes(a)?t.filter(g=>g!==a):[...t,a])},_=()=>{d.length===l.length?u([]):u(l.map(a=>a.id))};return e.jsxs(L,{auth:j,settings:v,footerSettings:N,children:[e.jsx(H,{title:"Söhbət Tarixçəsi"}),e.jsxs("section",{className:"w-full px-4 sm:px-6 lg:px-8 py-8 sm:py-12 lg:py-16 relative",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 rounded-full opacity-10",style:{background:`linear-gradient(135deg, ${i}, ${o})`}}),e.jsx("div",{className:"absolute bottom-20 left-10 w-24 h-24 rounded-full opacity-10",style:{background:`linear-gradient(135deg, ${z}, ${i})`}})]}),e.jsxs(n.div,{className:"max-w-7xl mx-auto relative z-10",variants:f,initial:"hidden",animate:"visible",children:[e.jsxs(n.div,{variants:x,className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full mb-6",style:{background:`linear-gradient(135deg, ${i}, ${o})`},children:e.jsx(r,{name:"history",size:32,color:"white"})}),e.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Söhbət Tarixçəsi"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Əvvəlki söhbətlərinizi axtarın və davam etdirin"})]}),e.jsxs(n.div,{variants:x,className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-3xl border border-gray-200 dark:border-gray-700 shadow-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(r,{name:"search",size:20,color:k?"#9ca3af":"#6b7280",className:"absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Söhbətlərdə axtarış...",value:s,onChange:a=>w(a.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:border-transparent transition-all bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400",style:{"--tw-ring-color":i}})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(r,{name:"select_all",size:16}),e.jsx("span",{className:"hidden sm:inline",children:d.length===l.length?"Hamısını ləğv et":"Hamısını seç"})]}),e.jsxs(y,{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-medium text-white transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",style:{background:`linear-gradient(135deg, ${i}, ${o})`},children:[e.jsx(r,{name:"add",size:16,color:"white"}),"Yeni Söhbət"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s?"Axtarış nəticəsi":"Ümumi söhbət"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:l.reduce((a,t)=>a+(t.messages?.length||0),0)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ümumi mesaj"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl bg-gray-50 dark:bg-gray-700/50",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.length}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seçilmiş"})]})]})]}),e.jsx(n.div,{variants:f,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.length>0?l.map((a,t)=>e.jsxs(n.div,{variants:x,whileHover:{scale:1.02,y:-5},className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-2xl border border-gray-200 dark:border-gray-700 shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden group",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2 line-clamp-2",children:a.title||`Söhbət ${t+1}`}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(r,{name:"schedule",size:16}),S(a.created_at)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:d.includes(a.id),onChange:()=>C(a.id),className:"rounded border-gray-300 dark:border-gray-600 text-indigo-600 focus:ring-indigo-500 focus:ring-offset-0"}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.is_active?"#10b981":"#6b7280"}})]})]}),a.messages&&a.messages.length>0&&e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.jsx("span",{className:"font-medium",children:"Son mesaj:"})}),e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-200 bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3",children:$(a.messages[a.messages.length-1]?.content)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-600 pt-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r,{name:"chat_bubble",size:14}),a.messages?.length||0," mesaj"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(r,{name:"token",size:14}),a.total_tokens||0," token"]})]})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{href:`/chat/${a.session_id}`,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm",children:[e.jsx(r,{name:"visibility",size:14}),"Göstər"]}),e.jsxs(y,{href:`/?session=${a.session_id}`,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-white text-sm transition-all hover:shadow-lg",style:{background:`linear-gradient(135deg, ${i}, ${o})`},children:[e.jsx(r,{name:"play_arrow",size:14,color:"white"}),"Davam et"]})]})})]},a.id)):e.jsxs(n.div,{variants:x,className:"col-span-full text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.jsx(r,{name:"chat",size:32,color:"#9ca3af"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2",children:s?"Axtarış nəticəsi tapılmadı":"Hələlik söhbət yoxdur"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:s?"Fərqli açar sözlərlə axtarış etməyə cəhd edin":"İlk söhbətinizi başlatmaq üçün aşağıdakı düyməyə basın"}),e.jsxs(y,{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-medium text-white transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",style:{background:`linear-gradient(135deg, ${i}, ${o})`},children:[e.jsx(r,{name:"add",size:16,color:"white"}),"Yeni Söhbət Başlat"]})]})}),d.length>0&&e.jsx(n.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:e.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-lg rounded-2xl border border-gray-200 dark:border-gray-700 shadow-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[d.length," söhbət seçildi"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors text-sm",children:[e.jsx(r,{name:"delete",size:14,color:"white"}),"Sil"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors text-sm",children:[e.jsx(r,{name:"archive",size:14,color:"white"}),"Arxivləş"]})]})]})})})]})]})]})}export{Y as default};
