import{j as e}from"./markdown-CGR2RDhP.js";import{a as b,c as h,H as _,d as N}from"./vendor-4eYsLQor.js";import{A as w}from"./AdminLayout-B1tjzq_A.js";import{I as s}from"./Icon-4HnnCzTR.js";import"./index-Cn3or5DS.js";import"./app-WdGbIXar.js";import"./app-C_PogMoC.js";import"./Footer-CVcIozJJ.js";function T({settings:l,statistics:o,recent_limits:n}){const[p,g]=b.useState(!1),[f,x]=b.useState(!1),[m,y]=b.useState(""),t={title:"Mesaj Limitləri",subtitle:"Qonaq və istifadəçi mesaj limitlərini idarə edin",guestLimits:"Qonaq Limitləri",userLimits:"İstifadəçi Limitləri",dailyLimit:"Gündəlik Limit",monthlyLimit:"Aylıq Limit",enableChatLimits:"Chat limitlərini aktivləşdir",enableIpSecurity:"IP təhlükəsizliyini aktivləşdir",chatLimitMessage:"Limit aşıldığında göstəriləcək mesaj",ipDuplicateMessage:"Duplikat IP halında göstəriləcək mesaj",totalLimits:"Ümumi Limitlər",activeLimits:"Aktiv Limitlər",unresolvedLogs:"Həll edilməmiş",blockedAttempts:"Blok edilmiş cəhdlər",recentActivity:"Son Aktivlik",resetAll:"Hamısını sıfırla",save:"Yadda saxla",cancel:"Ləğv et",confirm:"Təsdiq et",resetAllConfirm:"Bütün limitləri sıfırlamaq istədiyinizdən əminsiz?",resetAllConfirmDesc:"Bu əməl geri alına bilməz. Bütün mesaj limitləri sıfırlanacaq.",typeToConfirm:'Təsdiq üçün "LIMITI_SIFIRLA" yazın:',loading:"Yüklənir...",noRecentActivity:"Son aktivlik yoxdur",messages:"mesaj",user:"İstifadəçi",guest:"Qonaq",lastReset:"Son Sıfırlama",recentActivityDesc:"Bu bölmədə son vaxtlar aktivlik göstərən qonaq və istifadəçilərin limit məlumatlarını görə bilərsiniz. Təmizlə butonu ilə köhnə qeydləri silib yenidən tərtib edə bilərsiniz.",clearActivity:"Aktivlik Təmizlə",clearActivityConfirm:"Son aktivlik cədvəlini təmizləmək istədiyinizdz əminsiniz?",clearActivityDesc:'Bu əməl bütün limit qeydlərinin "son görünmə" vaxtını dahi geriylə çevirərək onları bu cədvəldən gizləyəcək.'},{data:a,setData:d,post:j,processing:u,errors:i}=h({guest_daily_limit:l.guest_daily_limit||5,guest_monthly_limit:l.guest_monthly_limit||100,user_daily_limit:l.user_daily_limit||50,user_monthly_limit:l.user_monthly_limit||1e3,guest_limit_type:l.guest_limit_type||"daily",user_limit_type:l.user_limit_type||"daily",enable_chat_limits:l.enable_chat_limits??!0,enable_ip_security:l.enable_ip_security??!0,chat_limit_message:l.chat_limit_message||"",ip_duplicate_message:l.ip_duplicate_message||""}),c=h({confirmation:""}),k=r=>{r.preventDefault(),j("/admin/chat-limits/settings")},v=()=>{m!=="LIMITI_SIFIRLA"||c.processing||(c.setData("confirmation",m),c.post("/admin/chat-limits/reset-all",{onSuccess:()=>{g(!1),y("")}}))};return e.jsxs(w,{children:[e.jsx(_,{title:t.title}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-100",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:t.subtitle})]}),e.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center gap-2",children:[e.jsx(s,{name:"trash",size:16,color:"white"}),t.resetAll]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s,{name:"chart",size:24,color:"#3b82f6"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.limits.total})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.totalLimits})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s,{name:"activity",size:24,color:"#10b981"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.limits.active})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.activeLimits})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s,{name:"shield_check",size:24,color:"#f59e0b"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.security.unresolved})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.unresolvedLogs})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(s,{name:"close",size:24,color:"#ef4444"}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.security.blocked_attempts})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.blockedAttempts})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx(s,{name:"settings",size:20,color:"#6366f1"}),"Limit Parametrlərı"]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-200",children:t.guestLimits}),e.jsxs("select",{value:a.guest_limit_type,onChange:r=>d("guest_limit_type",r.target.value),className:"text-sm px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"daily",children:"Günlük Limit"}),e.jsx("option",{value:"monthly",children:"Aylıq Limit"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:t.dailyLimit}),e.jsx("input",{type:"number",value:a.guest_daily_limit,onChange:r=>d("guest_daily_limit",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",min:"1",max:"1000",disabled:a.guest_limit_type==="monthly"}),i.guest_daily_limit&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.guest_daily_limit})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:t.monthlyLimit}),e.jsx("input",{type:"number",value:a.guest_monthly_limit,onChange:r=>d("guest_monthly_limit",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",min:"1",max:"10000",disabled:a.guest_limit_type==="daily"}),i.guest_monthly_limit&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.guest_monthly_limit})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-200",children:t.userLimits}),e.jsxs("select",{value:a.user_limit_type,onChange:r=>d("user_limit_type",r.target.value),className:"text-sm px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:[e.jsx("option",{value:"daily",children:"Günlük Limit"}),e.jsx("option",{value:"monthly",children:"Aylıq Limit"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:t.dailyLimit}),e.jsx("input",{type:"number",value:a.user_daily_limit,onChange:r=>d("user_daily_limit",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",min:"1",max:"10000",disabled:a.user_limit_type==="monthly"}),i.user_daily_limit&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.user_daily_limit})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:t.monthlyLimit}),e.jsx("input",{type:"number",value:a.user_monthly_limit,onChange:r=>d("user_monthly_limit",parseInt(r.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",min:"1",max:"100000",disabled:a.user_limit_type==="daily"}),i.user_monthly_limit&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.user_monthly_limit})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.enable_chat_limits,onChange:r=>d("enable_chat_limits",r.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:t.enableChatLimits})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a.enable_ip_security,onChange:r=>d("enable_ip_security",r.target.checked),className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:t.enableIpSecurity})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:t.chatLimitMessage}),e.jsx("textarea",{value:a.chat_limit_message,onChange:r=>d("chat_limit_message",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",rows:3,maxLength:500}),i.chat_limit_message&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.chat_limit_message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:t.ipDuplicateMessage}),e.jsx("textarea",{value:a.ip_duplicate_message,onChange:r=>d("ip_duplicate_message",r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",rows:3,maxLength:500}),i.ip_duplicate_message&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i.ip_duplicate_message})]})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 disabled:opacity-50 flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(s,{name:"activity",size:16,color:"white",className:"animate-spin"}),t.loading]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{name:"check",size:16,color:"white"}),t.save]})})]})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl border border-gray-200 dark:border-gray-600 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(s,{name:"activity",size:20,color:"#10b981"}),t.recentActivity]}),n&&n.length>0&&e.jsxs("button",{onClick:()=>x(!0),className:"px-3 py-1 text-xs bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors flex items-center gap-1",children:[e.jsx(s,{name:"trash",size:12,color:"white"}),"Təmizlə"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:t.recentActivityDesc}),n&&n.length>0?e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.map(r=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{name:r.type==="user"?"users":r.type==="ip"?"globe":"user",size:16,color:"#6b7280"}),e.jsx("span",{className:"font-medium text-sm text-gray-800 dark:text-gray-200",children:r.type==="user"?r.user_name||t.user:r.type==="ip"?`${t.guest} (IP: ${r.identifier})`:`${t.guest} (${r.identifier})`})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.last_activity})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:[r.message_count," ",t.messages," / ",r.daily_limit," gündəlik"]}),r.last_reset&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[t.lastReset,": ",r.last_reset]})]},r.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(s,{name:"activity",size:48,color:"#d1d5db",className:"mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.noRecentActivity})]})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:t.resetAllConfirm}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:t.resetAllConfirmDesc}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t.typeToConfirm}),e.jsx("input",{type:"text",value:m,onChange:r=>y(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"LIMITI_SIFIRLA"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{g(!1),y("")},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800",children:t.cancel}),e.jsx("button",{onClick:v,disabled:c.processing||m!=="LIMITI_SIFIRLA",className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50",children:c.processing?t.loading:t.confirm})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center",children:e.jsx(s,{name:"warning",size:20,color:"#f59e0b"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.clearActivity}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.clearActivityConfirm})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-sm",children:t.clearActivityDesc}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800 transition-colors",children:t.cancel}),e.jsxs("button",{onClick:()=>{N.post("/admin/chat-limits/clear-recent-activity"),x(!1)},className:"flex-1 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(s,{name:"check",size:16,color:"white"}),t.confirm]})]})]})})]})}export{T as default};
