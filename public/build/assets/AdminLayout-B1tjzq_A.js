import{j as e}from"./markdown-CGR2RDhP.js";import{u as I,a as s,L as l,b as g}from"./vendor-4eYsLQor.js";import{r as z}from"./index-Cn3or5DS.js";import{I as i}from"./Icon-4HnnCzTR.js";import{a as D}from"./app-WdGbIXar.js";import{F as R}from"./Footer-CVcIozJJ.js";function Z({children:A}){const{props:c}=I(),C=c.footerSettings||null,{theme:n,isLoading:B}=D(),[v,f]=s.useState(null),[d,w]=s.useState(!1),[j,u]=s.useState(0),[N,y]=s.useState(!1),[k,_]=s.useState([]),[b,S]=s.useState(!1),[r,h]=s.useState(!1),p=s.useRef(null),[M,E]=s.useState(!1),[$,P]=s.useState({top:80});s.useEffect(()=>{const t=localStorage.getItem("admin-dark-mode");h(t==="true"?!0:t==="false"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),s.useEffect(()=>{E(!0)},[]),s.useEffect(()=>{const t=()=>{try{if(p.current){const a=p.current.getBoundingClientRect();P({top:Math.max(0,a.bottom+8)})}}catch{}};return t(),window.addEventListener("resize",t),window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("resize",t),window.removeEventListener("scroll",t)}},[b]);const L=()=>{const t=!r;h(t),localStorage.setItem("admin-dark-mode",t.toString());try{window.dispatchEvent(new CustomEvent("admin-dark-mode-changed",{detail:t}))}catch{}};s.useEffect(()=>{const t=async()=>{try{const{data:o}=await g.get("/admin/notifications/stats");o?.data?.unread_notifications!==void 0?u(o.data.unread_notifications):o?.unread_count!==void 0&&u(o.unread_count)}catch{}},a=async()=>{try{const{data:o}=await g.get("/admin/notifications/recent");_(Array.isArray(o?.data)?o.data:Array.isArray(o)?o:[])}catch{}};if(t(),a(),c.flash?.success){f(c.flash.success);const o=setTimeout(()=>f(null),3e3);return()=>clearTimeout(o)}},[c.flash?.success]);const x=[{href:"/admin",icon:"nav_dashboard",label:"Panel",color:n.primary_color},{href:"/admin/users",icon:"users",label:"İstifadəçilər",color:n.secondary_color},{href:"/admin/providers",icon:"provider",label:"AI Provider",color:n.accent_color},{href:"/admin/ai-training",icon:"feature_ai",label:"AI Təlimat",color:"#9333ea"},{href:"/admin/settings",icon:"settings",label:"Parametrlər",color:n.primary_color},{href:"/admin/theme-settings",icon:"edit",label:"Mövzu",color:n.accent_color},{href:"/admin/seo",icon:"search",label:"SEO Panel",color:"#f59e0b"},{href:"/admin/terms-privacy",icon:"shield_check",label:"Şərtlər & Məxfilik",color:"#8b5cf6"},{href:"/admin/chat-analytics",icon:"chart",label:"Analitika",color:"#0ea5e9"},{href:"/admin/chat-management",icon:"feature_chat",label:"Söhbət İdarəsi",color:"#16a34a"},{href:"/admin/chat-limits",icon:"shield_check",label:"Mesaj Limitləri",color:"#dc2626"},{href:"/admin/ip-security",icon:"activity",label:"IP Təhlükəsizlik",color:"#ea580c"},{href:"/admin/donation",icon:"heart",label:"İanə",color:"#ef4444"},{href:"/admin/contact-settings",icon:"message",label:"Əlaqə",color:"#10b981"},{href:"/admin/mail-settings",icon:"settings",label:"E-poçt",color:"#2563eb"},{href:"/admin/system/update",icon:"download",label:"Sistem Yeniləməsi",color:"#16a34a"}],m=c?.url||window.location.pathname;return e.jsxs("div",{className:`min-h-screen flex flex-col transition-colors duration-300 ${r?"dark":""} overflow-x-hidden`,style:{background:r?"linear-gradient(135deg, #1f2937 0%, #111827 100%)":n.background_gradient},children:[e.jsx("nav",{ref:p,className:`relative overflow-visible backdrop-blur-lg border-b shadow-lg transition-colors duration-300 ${r?"bg-gray-800/90 border-gray-700/50":"bg-white/90 border-gray-200/50"}`,children:e.jsx("div",{className:"max-w-screen-2xl mx-auto w-full relative",children:e.jsxs("div",{className:"flex items-center justify-between px-3 md:px-4 py-3 gap-2 flex-wrap lg:flex-nowrap",children:[e.jsx("div",{className:"flex items-center space-x-2 md:space-x-3",children:e.jsxs(l,{href:"/admin",className:`flex items-center space-x-2 font-bold transition-colors ${r?"text-gray-200 hover:text-white":"text-gray-800 hover:text-gray-900"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:n.primary_color},children:e.jsx(i,{name:"nav_dashboard",size:18,color:"white"})}),e.jsx("span",{className:"text-lg hidden sm:block",children:"Admin Panel"})]})}),e.jsxs("div",{className:"hidden lg:flex items-center justify-center space-x-1 flex-1",children:[x.slice(0,7).map(t=>{const a=m===t.href||m.startsWith(t.href+"/");return e.jsxs(l,{href:t.href,className:`flex items-center space-x-1 px-2 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${a?r?"bg-gray-700 shadow-sm text-white border border-gray-600":"bg-white shadow-sm text-gray-900 border border-gray-200":r?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[e.jsx(i,{name:t.icon,size:16,color:a?t.color:"#6b7280"}),e.jsx("span",{children:t.label})]},t.href)}),x.length>7&&e.jsx("button",{type:"button",onClick:()=>S(t=>!t),className:`hidden lg:inline-flex items-center justify-center p-2 rounded-lg ring-1 ${r?"bg-gray-800 text-gray-200 ring-gray-700 hover:bg-gray-700":"bg-white text-gray-700 ring-gray-200 hover:bg-gray-50"}`,title:"Daha çox","aria-expanded":b,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:e.jsx("path",{d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:L,className:`p-2 rounded-lg transition-colors ${r?"text-yellow-400 hover:text-yellow-300 hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:e.jsx(i,{name:r?"sun":"moon",size:20,color:r?"#facc15":"#6b7280"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:`relative p-2 rounded-lg transition-colors ${r?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,onClick:async()=>{const t=!N;if(y(t),!!t){try{await g.post("/admin/notifications/read-all"),u(0)}catch{}try{const{data:a}=await g.get("/admin/notifications/recent");_(Array.isArray(a?.data)?a.data:Array.isArray(a)?a:[])}catch{}}},children:[e.jsx(i,{name:"bell",size:20,color:"#6b7280"}),j>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:j})]}),e.jsx("button",{onClick:()=>w(!d),className:`lg:hidden p-2 rounded-lg transition-colors ${r?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:e.jsx(i,{name:d?"close":"menu",size:20,color:"#6b7280"})})]}),e.jsxs(l,{href:"/",className:"px-3 py-2 rounded-lg text-white font-medium hover:shadow-lg transition-all flex items-center space-x-2 text-sm",style:{backgroundColor:n.primary_color},children:[e.jsx(i,{name:"arrow_left",size:16,color:"white"}),e.jsx("span",{className:"hidden sm:inline",children:"Çat"})]})]})]})})}),e.jsx("div",{className:`lg:hidden backdrop-blur-lg border-b shadow-lg transition-all duration-300 ease-in-out ${d?"opacity-100":"opacity-0 pointer-events-none"} ${r?"bg-gray-800/95 border-gray-700/50":"bg-white/95 border-gray-200/50"} ${d?"max-h-[75vh] py-2":"max-h-0 py-0"} overflow-hidden transition-[max-height,padding]`,children:e.jsx("div",{className:`mx-auto px-4 ${d?"py-4":"py-0"}`,children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:x.map(t=>{const a=m===t.href||m.startsWith(t.href+"/");return e.jsxs(l,{href:t.href,onClick:()=>w(!1),className:`flex flex-col items-center space-y-2 p-3 rounded-lg text-xs font-medium transition-all duration-200 ${a?r?"bg-gray-700 shadow-sm text-white border border-gray-600":"bg-white shadow-sm text-gray-900 border border-gray-200":r?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[e.jsx(i,{name:t.icon,size:18,color:a?t.color:"#6b7280"}),e.jsx("span",{className:"text-[11px] leading-4 text-center",children:t.label})]},t.href)})})})}),v&&e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:e.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:v}),e.jsx("button",{onClick:()=>f(null),className:"ml-3 text-white hover:text-gray-200 transition-colors",children:e.jsx(i,{name:"close",size:16,color:"white"})})]})}),e.jsx("main",{className:"flex-1 p-4",children:A}),e.jsx(R,{footerSettings:C}),M&&b&&z.createPortal(e.jsx("div",{className:r?"dark":"",children:e.jsx("div",{className:`hidden lg:block fixed left-1/2 -translate-x-1/2 rounded-lg border ${r?"border-gray-700 bg-gray-800/95":"border-gray-200 bg-white"} shadow-2xl overflow-hidden animate-dropdown`,style:{top:$.top,zIndex:2147483647},children:e.jsx("div",{className:"grid grid-cols-2 xl:grid-cols-3 gap-1 p-2",children:x.slice(7).map(t=>e.jsxs(l,{href:t.href,className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition ${r?"text-gray-300 hover:text-white hover:bg-gray-700/50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,onClick:()=>S(!1),children:[e.jsx(i,{name:t.icon,size:16,color:t.color}),e.jsx("span",{children:t.label})]},t.href))})})}),document.body),M&&N&&z.createPortal(e.jsx("div",{className:r?"dark":"",children:e.jsxs("div",{className:"fixed right-4 top-16 w-80 max-w-[90vw] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl animate-dropdown origin-top-right",style:{zIndex:2147483647},children:[e.jsx("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700 font-semibold text-gray-800 dark:text-gray-100",children:"Bildirişlər"}),e.jsx("div",{className:"max-h-80 overflow-auto",children:k.length===0?e.jsx("div",{className:"p-4 text-sm text-gray-500 dark:text-gray-400",children:"Bildiriş yoxdur"}):k.map(t=>e.jsxs("div",{className:"flex items-start gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-100 dark:bg-gray-700",children:e.jsx(i,{name:t.icon||"info",size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(l,{href:"/admin/notifications",onClick:()=>y(!1),className:"text-sm font-medium text-gray-800 dark:text-gray-100 truncate hover:underline",children:t.title}),t.message&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.message}),e.jsx("div",{className:"mt-1 text-[11px] text-gray-400 dark:text-gray-400",children:e.jsx(l,{href:"/admin/notifications",onClick:()=>y(!1),className:"hover:underline",children:t.created_at?new Date(t.created_at).toLocaleString("az-AZ"):""})})]})]},t.id))}),e.jsx("div",{className:"p-2 border-t border-gray-200 dark:border-gray-700 text-center",children:e.jsx("a",{href:"/admin/notifications",className:"text-sm text-emerald-600 hover:text-emerald-700",children:"Bütün bildirişlər"})})]})}),document.body)]})}export{Z as A};
