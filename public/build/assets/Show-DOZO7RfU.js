import{j as e}from"./markdown-CGR2RDhP.js";import{a as m,H as g,d as l}from"./vendor-4eYsLQor.js";import{A as y}from"./AdminLayout-DySFFO67.js";import{I as d}from"./Icon-4HnnCzTR.js";import{m as b}from"./proxy-CfrAqMoI.js";import"./index-Cn3or5DS.js";import"./app-CzbWqHbf.js";import"./app-C9FNok6L.js";import"./Footer-BjTiE0I4.js";function M({session:r,messages:a}){const[n,i]=m.useState(!1),t={title:"Söhbət Detalları",backToList:"Siyahıya qayıt",sessionInfo:"Session Məlumatları",sessionId:"Session ID",user:"İstifadəçi",guest:"Qonaq",created:"Yaradıldı",lastActivity:"Son Aktivlik",totalMessages:"Ümumi Mesajlar",deleteSession:"Söhbəti sil",messages:"Mesajlar",userMessage:"İstifadəçi Mesajı",assistantMessage:"AI Cavabı",noMessages:"Mesaj yoxdur",noMessagesDesc:"Bu söhbətdə hələ heç bir mesaj yoxdur.",confirmDelete:"Bu söhbəti silmək istədiyinizdən əminsiz?",confirmDeleteDesc:"Bu əməl geri alına bilməz. Bütün mesajlar silinəcək.",cancel:"Ləğv et",confirm:"Sil"},o=()=>{l.delete(`/admin/chat-management/${r.session_id}`,{onSuccess:()=>{l.visit("/admin/chat-management")}})},c=s=>s?s.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/```(.*?)```/gs,'<pre class="bg-gray-100 p-2 rounded text-sm overflow-x-auto"><code>$1</code></pre>').replace(/`(.*?)`/g,'<code class="bg-gray-100 px-1 rounded text-sm">$1</code>').replace(/\n/g,"<br>"):"";return e.jsxs(y,{children:[e.jsx(g,{title:`${t.title} - ${r.title}`}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>l.visit("/admin/chat-management"),className:"text-indigo-600 hover:text-indigo-800 mb-2 flex items-center gap-2",children:[e.jsx(d,{name:"arrow_left",size:16,color:"currentColor"}),t.backToList]}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-100",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 truncate",children:r.title})]}),e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:t.deleteSession})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl border border-gray-200 dark:border-gray-600 p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:t.sessionInfo}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t.sessionId}),e.jsx("p",{className:"text-gray-900 dark:text-gray-200 font-mono text-sm break-all",children:r.session_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t.user}),r.user?e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-gray-200 font-medium",children:r.user.name}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.user.email})]}):e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full",children:t.guest})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"IP Ünvanı"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-200 font-mono text-sm",children:r.ip_address||"Məlum deyil"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t.totalMessages}),e.jsx("p",{className:"text-gray-900 dark:text-gray-200 text-lg font-semibold",children:a?.total||0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t.created}),e.jsx("p",{className:"text-gray-900 dark:text-gray-200",children:new Date(r.created_at).toLocaleString("az-AZ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:t.lastActivity}),e.jsx("p",{className:"text-gray-900 dark:text-gray-200",children:new Date(r.updated_at).toLocaleString("az-AZ")})]})]})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-600",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t.messages})}),a?.data&&a.data.length>0?e.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:a.data.map((s,x)=>e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.05},className:`p-6 border-b border-gray-100 dark:border-gray-600 last:border-b-0 ${s.sender==="user"?"bg-blue-50/50 dark:bg-blue-900/20":"bg-gray-50/50 dark:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium ${s.sender==="user"?"bg-blue-500":"bg-gray-500"}`,children:e.jsx(d,{name:s.sender==="user"?"users":"bot",size:16,color:"white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-200",children:s.sender==="user"?t.userMessage:t.assistantMessage}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(s.created_at).toLocaleString("az-AZ")})]}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300 leading-relaxed message-content",dangerouslySetInnerHTML:{__html:c(s.message)}})]})]})},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{name:"feature_chat",size:64,color:"#d1d5db",className:"mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-200 mb-2",children:t.noMessages}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.noMessagesDesc})]})]}),a?.data&&a.total>a.per_page&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("button",{disabled:!a.prev_page_url,onClick:()=>l.get(window.location.pathname,{page:a.current_page-1},{preserveScroll:!0,preserveState:!0}),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"« Əvvəlki"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Səhifə ",a.current_page," / ",a.last_page]}),e.jsx("button",{disabled:!a.next_page_url,onClick:()=>l.get(window.location.pathname,{page:a.current_page+1},{preserveScroll:!0,preserveState:!0}),className:"px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Sonrakı »"})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:t.confirmDelete}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:t.confirmDeleteDesc}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800",children:t.cancel}),e.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:t.confirm})]})]})}),e.jsx("style",{jsx:!0,children:`
                .message-content pre {
                    white-space: pre-wrap;
                    word-wrap: break-word;
                }
                
                .message-content code {
                    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
                }
                
                .message-content strong {
                    font-weight: 600;
                }
                
                .message-content em {
                    font-style: italic;
                }
            `})]})}export{M as default};
