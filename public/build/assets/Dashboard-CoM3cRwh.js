import{j as e}from"./markdown-CGR2RDhP.js";import{a as n,H as k,L as u,b as h}from"./vendor-4eYsLQor.js";import{A as N}from"./AdminLayout-B1tjzq_A.js";import{I as t}from"./Icon-4HnnCzTR.js";import{u as z}from"./app-WdGbIXar.js";import{m as p}from"./proxy-CfrAqMoI.js";import"./index-Cn3or5DS.js";import"./Footer-CVcIozJJ.js";import"./app-C_PogMoC.js";function C(i){try{const a=i.match(/rgba?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d\.]+))?\)/i);return a?{r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10),a:a[4]!==void 0?parseFloat(a[4]):1}:{r:255,g:255,b:255,a:1}}catch{return{r:255,g:255,b:255,a:1}}}function D({r:i,g:a,b:x}){const d=o=>{const g=o/255;return g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)},s=d(i),l=d(a),m=d(x);return .2126*s+.7152*l+.0722*m}function S(i){let a=i;for(;a;){try{const d=window.getComputedStyle(a).backgroundColor,{r:s,g:l,b:m,a:o}=C(d||"rgba(0,0,0,0)");if(o>0&&!(s===0&&l===0&&m===0&&o===0))return{r:s,g:l,b:m}}catch{}a=a.parentElement}return{r:255,g:255,b:255}}function q({stats:i,system_health:a,notification_stats:x,ip_security_stats:d}){const s=z(),l=n.useRef(null),[m,o]=n.useState("#111827"),[g,y]=n.useState("#374151"),[A,f]=n.useState(!1),c=n.useCallback(()=>{if(typeof window>"u")return;const r=l.current,b=!!(r&&r.closest(".dark"));if(f(b),b){o("#ffffff"),y("#d1d5db");return}const j=r||document.body,w=S(j);D(w),o("#111827"),y("#374151")},[]);n.useEffect(()=>{c(),window.addEventListener("resize",c);const r=()=>c();return window.addEventListener("admin-dark-mode-changed",r),()=>{window.removeEventListener("resize",c),window.removeEventListener("admin-dark-mode-changed",r)}},[c]);const v=[{label:"İstifadəçilər",value:i.users,color:"#6366F1",icon:"users",description:"Qeydiyyatdan keçmiş istifadəçilər"},{label:"Söhbət Sessiyaları",value:i.sessions,color:"#EC4899",icon:"feature_chat",description:"Aktiv və keçmiş söhbətlər"},{label:"Mesajlar",value:i.messages,color:"#10B981",icon:"message",description:"Ümumi göndərilmiş mesajlar"},{label:"AI Provayderləri",value:i.providers,color:"#F59E0B",icon:"provider",description:"Quraşdırılmış AI xidmətləri"},{label:"IP Təhlükəsizlik",value:d?.unresolved_security_logs||0,color:"#EF4444",icon:"shield_check",description:"Həll edilməyən təhlükəsizlik logları"},{label:"Bildirişlər",value:x?.unread_notifications||0,color:"#8B5CF6",icon:"bell",description:"Oxunmamış admin bildirişləri"}];return e.jsxs(N,{children:[e.jsx(k,{title:"Admin Dashboard"}),e.jsxs("div",{className:"p-3 md:p-6",children:[e.jsxs("div",{className:"mb-6 md:mb-8 backdrop-blur-md bg-white/70 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 md:p-6 shadow-lg",children:[e.jsx("h1",{className:"text-xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Admin Panel"}),e.jsx("p",{className:"text-gray-900 dark:text-white text-sm md:text-base",children:"Sistem statistikaları və idarəetmə alətləri"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 md:gap-4 mb-6 md:mb-8",ref:l,children:v.map((r,b)=>e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:b*.1},className:"backdrop-blur-md bg-white/85 dark:bg-gray-800/70 border border-gray-200 dark:border-gray-700 rounded-2xl p-4 md:p-6 shadow-xl hover:shadow-2xl transition-all duration-300 hover:-translate-y-1",style:{background:`linear-gradient(135deg, ${r.color}15 0%, ${r.color}05 100%)`,borderColor:`${r.color}40`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(t,{name:r.icon,size:28,color:r.color}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color}})]}),e.jsx("h3",{className:"text-sm md:text-base font-semibold mb-1 text-gray-900 dark:text-white",children:r.label}),e.jsx("p",{className:"text-xl md:text-3xl font-bold mb-2 text-gray-900 dark:text-white",children:r.value.toLocaleString()}),e.jsx("p",{className:"text-xs md:text-sm text-gray-700 dark:text-gray-300",children:r.description})]},r.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-6",children:[e.jsxs(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4},className:"backdrop-blur-md bg-white/85 dark:bg-gray-800/70 rounded-2xl p-4 md:p-6 shadow-xl border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold mb-3 md:mb-4 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(t,{name:"lightning",size:24,color:"#3b82f6"}),"Sürətli Əməliyyatlar"]}),e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsxs(u,{href:"/admin/users",className:"group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",children:[e.jsx(t,{name:"users",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"İstifadəçi İdarəetmə"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"İstifadəçiləri idarə edin"})]})]}),e.jsxs(u,{href:"/admin/providers",className:"group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",children:[e.jsx(t,{name:"provider",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"AI Provayderlər"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"AI xidmətlərini quraşdırın"})]})]}),e.jsxs(u,{href:"/admin/ai-training",className:"group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",children:[e.jsx(t,{name:"graduate",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"AI Təlimatı"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Bilik bazası və təlimatlar"})]})]}),e.jsxs(u,{href:"/admin/settings",className:"group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",children:[e.jsx(t,{name:"settings",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"Sayt Tənzimləmələri"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Ümumi parametrlər"})]})]}),e.jsxs("button",{onClick:async()=>{try{const{data:r}=await h.post("/admin/system/clear-cache");r?.success?s.success(r.message||"Keş təmizləndi"):s.error(r?.message||"Keş təmizləmə xətası")}catch{s.error("Keş təmizləmə alınmadı")}},className:"w-full group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",type:"button",children:[e.jsx(t,{name:"lightning",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"Keş təmizlə"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Sistem keşini təmizlə"})]})]}),e.jsxs("button",{onClick:async()=>{if(confirm(`Database təmir prosesi başlayacaq. Migration-lar işlədilib cədvəllər yoxlanılacaq.

Davam etmək istəyirsiniz?`)){s.info("Database təmir edilir...",{duration:2e3});try{const{data:r}=await h.post("/admin/system/repair-database");r?.success?(s.success(r.message||"Database uğurla təmir edildi!"),r.results&&r.results.length>0&&(console.log("Database Təmir Nəticələri:",r.results),s.info(`Təmir nəticəsi:
${r.results.slice(0,3).join(`
`)}${r.results.length>3?`
... daha çox`:""}`,{duration:8e3})),r.errors&&r.errors.length>0&&(console.warn("Database Təmir Xətaları:",r.errors),s.warning(`Bəzi xətalar:
${r.errors.slice(0,2).join(`
`)}`,{duration:6e3}))):(s.error(r?.message||"Database təmir xətası"),r.errors&&r.errors.length>0&&console.error("Database Repair Errors:",r.errors))}catch(r){console.error("Database repair error:",r),s.error("Database təmir alınmadı: "+(r.response?.data?.message||r.message))}}},className:"w-full group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",type:"button",children:[e.jsx(t,{name:"database",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"Database Təmir Et"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Migration-lar və cədvəllər"})]})]}),e.jsxs("button",{onClick:async()=>{if(confirm(`user_backgrounds cədvəli yaradılacaq (migration işləməz idi).

Davam etmək istəyirsiniz?`)){s.info("user_backgrounds cədvəli yaradılır...",{duration:2e3});try{const{data:r}=await h.post("/admin/system/create-user-backgrounds");r?.success?s.success(r.message||"Cədvəl uğurla yaradıldı!"):s.error(r?.message||"Cədvəl yaratma xətası")}catch(r){console.error("Create table error:",r),s.error("Cədvəl yaradılma alınmadı: "+(r.response?.data?.message||r.message))}}},className:"w-full group flex items-center px-3 md:px-4 py-3 md:py-4 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl text-sm md:text-base transform hover:scale-105",type:"button",children:[e.jsx(t,{name:"plus",size:20,color:"white",className:"mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:"user_backgrounds Yarat"}),e.jsx("div",{className:"text-xs md:text-sm opacity-80",children:"Manual cədvəl yaratma"})]})]})]})]}),e.jsxs(p.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.4},className:"backdrop-blur-md bg-white/85 dark:bg-gray-800/70 rounded-2xl p-4 md:p-6 shadow-xl border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold mb-3 md:mb-4 text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(t,{name:"shield_check",size:24,color:"#10b981"}),"Sistem Sağlamlığı"]}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{name:"database",size:20,color:a?.database?.status==="healthy"?"#10b981":"#ef4444"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Verilenlər Bazası"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a?.database?.message||"MySQL əlaqəsi"})]})]}),e.jsx("span",{className:`font-semibold text-sm md:text-base px-2 py-1 rounded-full ${a?.database?.status==="healthy"?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:a?.database?.status==="healthy"?"✓ Aktiv":"✗ Xəta"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{name:"provider",size:20,color:a?.ai_provider?.status==="healthy"?"#8b5cf6":"#ef4444"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:"AI Provayderləri"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a?.ai_provider?.provider||"Unknown"})]})]}),e.jsx("span",{className:`font-semibold text-sm md:text-base px-2 py-1 rounded-full ${a?.ai_provider?.status==="healthy"?"text-green-600 bg-green-100":"text-orange-600 bg-orange-100"}`,children:a?.ai_provider?.status==="healthy"?"✓ Aktiv":"⚠ Problem"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{name:"lightning",size:20,color:a?.cache?.status==="healthy"?"#f59e0b":"#ef4444"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Keş Sistemi"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a?.cache?.driver||"Cache"})]})]}),e.jsx("span",{className:`font-semibold text-sm md:text-base px-2 py-1 rounded-full ${a?.cache?.status==="healthy"?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:a?.cache?.status==="healthy"?"✓ İşləyir":"✗ Xəta"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{name:"database",size:20,color:a?.storage?.status==="healthy"?"#06b6d4":"#ef4444"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-200",children:"Storage"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a?.storage?.usage_percentage||0,"% dolu"]})]})]}),e.jsx("span",{className:`font-semibold text-sm md:text-base px-2 py-1 rounded-full ${a?.storage?.status==="healthy"?"text-green-600 bg-green-100":a?.storage?.status==="warning"?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:a?.storage?.status==="healthy"?"✓ Yaxşı":a?.storage?.status==="warning"?"⚠ Dolu":"✗ Xəta"})]})]})]})]})]})]})}export{q as default};
