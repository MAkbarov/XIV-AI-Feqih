import{j as e}from"./markdown-CGR2RDhP.js";import{a as o,c as N,H as w,L as n,d as _}from"./vendor-4eYsLQor.js";import{A as L}from"./AdminLayout-DvCE-vwa.js";import"./index-Cn3or5DS.js";import"./Icon-4HnnCzTR.js";import"./app-DpLxskS-.js";import"./app-BS3HdcSV.js";import"./Footer-CFOGyUqU.js";function V({logs:s,statistics:i,auth:g}){const[c,d]=o.useState([]),[p,x]=o.useState(!1),[l,m]=o.useState(null),a=N({admin_notes:""}),y=t=>{d(r=>r.includes(t)?r.filter(v=>v!==t):[...r,t])},u=t=>{d(t?s.data.map(r=>r.id):[])},j=t=>{m(t),x(!0),a.reset()},b=t=>{t.preventDefault(),a.post(`/admin/ip-security/${l.id}/resolve`,{onSuccess:()=>{x(!1),m(null)}})},f=t=>{confirm("Bu təhlükəsizlik logunu silmək istədiyinizdən əminsiniz?")&&_.delete(`/admin/ip-security/${t.id}`)},h=t=>({blocked_duplicate:"Dublikat Bloklandı",rate_limited:"Rate Limit",suspicious_activity:"Şübhəli Aktivlik",unauthorized_access:"İcazəsiz Giriş"})[t]||t,k=t=>({blocked_duplicate:"bg-red-100 text-red-800",rate_limited:"bg-yellow-100 text-yellow-800",suspicious_activity:"bg-orange-100 text-orange-800",unauthorized_access:"bg-red-100 text-red-800"})[t]||"bg-gray-100 text-gray-800";return e.jsxs(L,{auth:g,children:[e.jsx(w,{title:"IP Təhlükəsizlik"}),e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 dark:text-gray-100",children:"IP Təhlükəsizlik"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Sistem təhlükəsizlik loglarını izləyin və idarə edin"})]}),e.jsxs(n,{href:"/admin/chat-limits",className:"px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Chat Limitlər"]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.total_logs})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Ümumi Loglar"})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.unresolved_logs})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Həll Edilməyən"})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})}),e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.blocked_attempts})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Bloklanmış"})]}),e.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-8 0h8m-8 0H4a2 2 0 00-2 2v8a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2h-4m-8 0V7"})}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.today_logs})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Bu Gün"})]})]}),e.jsx("div",{className:"bg-white/90 dark:bg-gray-800/90 rounded-xl border border-gray-200 dark:border-gray-600 overflow-hidden",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:"Təhlükəsizlik Logları"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:"IP təhlükəsizlik hadisələri və cəhdlər"})]}),c.length>0&&e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:()=>d([]),children:"Seçimi İptal Et"})})]}),s.data.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-900 dark:text-white",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Təhlükəsizlik logu yoxdur"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-300",children:"Hələ heç bir IP təhlükəsizlik hadisəsi qeydə alınmayıb."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:c.length===s.data.length,onChange:t=>u(t.target.checked)})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"IP Ünvan"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Əməliyyat"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İstifadəçi"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarix"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Əməliyyatlar"})})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.data.map(t=>e.jsxs("tr",{className:t.is_resolved?"bg-gray-50":"bg-white",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:c.includes(t.id),onChange:()=>y(t.id)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.ip_address})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(t.action_type)}`,children:h(t.action_type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.existing_user?e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.jsx("div",{className:"font-medium",children:t.existing_user.name}),e.jsx("div",{className:"text-gray-500 dark:text-gray-300",children:t.existing_user.email})]}):e.jsx("div",{className:"text-sm text-gray-500",children:t.attempted_email?e.jsxs("div",{children:[e.jsxs("div",{className:"text-red-600",children:["Cəhd: ",t.attempted_name]}),e.jsx("div",{className:"text-red-500",children:t.attempted_email})]}):e.jsx("span",{className:"text-gray-500 dark:text-gray-300",children:"Qeydiyyatsız"})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_resolved?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Həll Edildi"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Açıq"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:[new Date(t.created_at).toLocaleDateString("az-AZ")," ",new Date(t.created_at).toLocaleTimeString("az-AZ")]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[!t.is_resolved&&e.jsx("button",{type:"button",onClick:()=>j(t),className:"text-green-600 hover:text-green-900",children:"Həll Et"}),e.jsx("button",{type:"button",onClick:()=>f(t),className:"text-red-600 hover:text-red-900",children:"Sil"})]})})]},t.id))})]})}),s.links&&s.links.length>3&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.prev_page_url&&e.jsx(n,{href:s.prev_page_url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Əvvəlki"}),s.next_page_url&&e.jsx(n,{href:s.next_page_url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Növbəti"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:s.from})," - ",e.jsx("span",{className:"font-medium",children:s.to})," arası, ümumi ",e.jsx("span",{className:"font-medium",children:s.total})," nəticə"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:s.links.map((t,r)=>e.jsx(n,{href:t.url,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t.active?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${r===0?"rounded-l-md":""} ${r===s.links.length-1?"rounded-r-md":""}`,dangerouslySetInnerHTML:{__html:t.label}},r))})})]})]})]})})]}),p&&l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 dark:bg-green-900/50 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Logu Həll Et"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["IP: ",e.jsx("strong",{children:l.ip_address})," - ",h(l.action_type)]})]})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin_notes",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Admin Qeydləri"}),e.jsx("textarea",{id:"admin_notes",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200",placeholder:"Bu problemin necə həll edildiyi haqqında qeyd...",value:a.data.admin_notes,onChange:t=>a.setData("admin_notes",t.target.value)}),a.errors.admin_notes&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.errors.admin_notes})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 bg-white dark:bg-gray-800 transition-colors",children:"İptal Et"}),e.jsx("button",{type:"submit",disabled:a.processing,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:a.processing?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Həll Edilir..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Həll Et"]})})]})]})]})})]})}export{V as default};
